{"remainingRequest":"/Users/weizhibang/work/cloud_vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/weizhibang/work/cloud_vue/src/layout/header-aside/components/menu-side/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/weizhibang/work/cloud_vue/src/layout/header-aside/components/menu-side/index.vue","mtime":1538206615096},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/cache-loader/dist/cjs.js","mtime":1538207325695},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/cache-loader/dist/cjs.js","mtime":1538207325695},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from 'vuex'\nimport menuMixin from '../mixin/menu'\nimport d2LayoutMainMenuItem from '../components/menu-item/index.vue'\nimport d2LayoutMainMenuSub from '../components/menu-sub/index.vue'\nimport BScroll from 'better-scroll'\nexport default {\n  name: 'd2-layout-header-aside-menu-side',\n  mixins: [\n    menuMixin\n  ],\n  components: {\n    'd2-layout-header-aside-menu-item': d2LayoutMainMenuItem,\n    'd2-layout-header-aside-menu-sub': d2LayoutMainMenuSub\n  },\n  data () {\n    return {\n      active: '',\n      asideHeight: 300,\n      BS: null\n    }\n  },\n  computed: {\n    ...mapState('d2admin/menu', [\n      'aside',\n      'asideCollapse'\n    ])\n  },\n  watch: {\n    // 折叠和展开菜单的时候销毁 better scroll\n    asideCollapse (val) {\n      this.scrollDestroy()\n      setTimeout(() => {\n        this.scrollInit()\n      }, 500)\n    },\n    // 监听路由 控制侧边栏激活状态\n    '$route.matched': {\n      handler (val) {\n        this.active = val[val.length - 1].path\n        this.$nextTick(() => {\n          if (this.aside.length > 0) {\n            this.$refs.menu.activeIndex = this.active\n          }\n        })\n      },\n      immediate: true\n    }\n  },\n  mounted () {\n    this.scrollInit()\n  },\n  beforeDestroy () {\n    this.scrollDestroy()\n  },\n  methods: {\n    scrollInit () {\n      this.BS = new BScroll(this.$el, {\n        mouseWheel: true\n        // 如果你愿意可以打开显示滚动条\n        // scrollbar: {\n        //   fade: true,\n        //   interactive: false\n        // }\n      })\n    },\n    scrollDestroy () {\n      // https://github.com/d2-projects/d2-admin/issues/75\n      try {\n        this.BS.destroy()\n      } catch (e) {\n        delete this.BS\n        this.BS = null\n      }\n    }\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/layout/header-aside/components/menu-side","sourcesContent":["<template>\n  <div class=\"d2-layout-header-aside-menu-side\">\n    <el-menu\n      :collapse=\"asideCollapse\"\n      :unique-opened=\"true\"\n      :default-active=\"active\"\n      ref=\"menu\"\n      @select=\"handleMenuSelect\">\n      <template v-for=\"(menu, menuIndex) in aside\">\n        <d2-layout-header-aside-menu-item v-if=\"menu.children === undefined\" :menu=\"menu\" :key=\"menuIndex\"/>\n        <d2-layout-header-aside-menu-sub v-else :menu=\"menu\" :key=\"menuIndex\"/>\n      </template>\n    </el-menu>\n    <div v-if=\"aside.length === 0 && !asideCollapse\" class=\"d2-layout-header-aside-menu-empty\" flex=\"dir:top main:center cross:center\">\n      <d2-icon name=\"inbox\"/>\n      <span>没有侧栏菜单</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport menuMixin from '../mixin/menu'\nimport d2LayoutMainMenuItem from '../components/menu-item/index.vue'\nimport d2LayoutMainMenuSub from '../components/menu-sub/index.vue'\nimport BScroll from 'better-scroll'\nexport default {\n  name: 'd2-layout-header-aside-menu-side',\n  mixins: [\n    menuMixin\n  ],\n  components: {\n    'd2-layout-header-aside-menu-item': d2LayoutMainMenuItem,\n    'd2-layout-header-aside-menu-sub': d2LayoutMainMenuSub\n  },\n  data () {\n    return {\n      active: '',\n      asideHeight: 300,\n      BS: null\n    }\n  },\n  computed: {\n    ...mapState('d2admin/menu', [\n      'aside',\n      'asideCollapse'\n    ])\n  },\n  watch: {\n    // 折叠和展开菜单的时候销毁 better scroll\n    asideCollapse (val) {\n      this.scrollDestroy()\n      setTimeout(() => {\n        this.scrollInit()\n      }, 500)\n    },\n    // 监听路由 控制侧边栏激活状态\n    '$route.matched': {\n      handler (val) {\n        this.active = val[val.length - 1].path\n        this.$nextTick(() => {\n          if (this.aside.length > 0) {\n            this.$refs.menu.activeIndex = this.active\n          }\n        })\n      },\n      immediate: true\n    }\n  },\n  mounted () {\n    this.scrollInit()\n  },\n  beforeDestroy () {\n    this.scrollDestroy()\n  },\n  methods: {\n    scrollInit () {\n      this.BS = new BScroll(this.$el, {\n        mouseWheel: true\n        // 如果你愿意可以打开显示滚动条\n        // scrollbar: {\n        //   fade: true,\n        //   interactive: false\n        // }\n      })\n    },\n    scrollDestroy () {\n      // https://github.com/d2-projects/d2-admin/issues/75\n      try {\n        this.BS.destroy()\n      } catch (e) {\n        delete this.BS\n        this.BS = null\n      }\n    }\n  }\n}\n</script>\n"]}]}