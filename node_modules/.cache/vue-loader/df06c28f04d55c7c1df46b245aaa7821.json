{"remainingRequest":"/Users/weizhibang/work/cloud_vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/weizhibang/work/cloud_vue/src/layout/header-aside/components/header-error-log/components/list/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/weizhibang/work/cloud_vue/src/layout/header-aside/components/header-error-log/components/list/index.vue","mtime":1538206615092},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/cache-loader/dist/cjs.js","mtime":1538207325695},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/cache-loader/dist/cjs.js","mtime":1538207325695},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from 'vuex'\nimport { get } from 'lodash'\nimport ExpandItem from './components/ExpandItem'\nexport default {\n  name: 'd2-error-log-list',\n  components: {\n    ExpandItem\n  },\n  computed: {\n    ...mapState('d2admin', {\n      logList: state => state.log.list\n    }),\n    logReverse () {\n      // 直接 reverse 的话有点问题\n      const res = []\n      const loglength = this.logList.length\n      this.logList.forEach((log, index) => {\n        res.push(this.logList[loglength - 1 - index])\n      })\n      return res\n    }\n  },\n  methods: {\n    get,\n    filterType (value, row) {\n      return row.type === value\n    },\n    stackBeautify (err) {\n      if (!err) {\n        return ''\n      }\n      return err.stack\n    }\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/layout/header-aside/components/header-error-log/components/list","sourcesContent":["<template>\n  <el-table\n    :data=\"logReverse\"\n    border\n    stripe\n    style=\"width: 100%\"\n    size=\"mini\">\n\n    <el-table-column type=\"expand\">\n      <div slot-scope=\"props\" class=\"d2-error-log-list__expand-group\">\n        <expand-item\n          :type=\"props.row.type\"\n          title=\"类型\"\n          :value=\"props.row.type === 'log' ? '日志' : '异常'\"/>\n        <expand-item\n          :type=\"props.row.type\"\n          title=\"内容\"\n          :value=\"props.row.info\"/>\n        <expand-item\n          v-if=\"props.row.type === 'error'\"\n          type=\"error\"\n          title=\"报错组件\"\n          :value=\"get(props.row.vm, '$vnode.tag', '')\"/>\n        <expand-item\n          v-if=\"props.row.type === 'error'\"\n          type=\"error\"\n          title=\"错误名称\"\n          :value=\"get(props.row.err, 'name', '')\"/>\n        <expand-item\n          v-if=\"props.row.type === 'error'\"\n          type=\"error\"\n          title=\"错误信息\"\n          :value=\"get(props.row.err, 'message', '')\"/>\n        <expand-item\n          v-if=\"props.row.type === 'error'\"\n          type=\"error\"\n          title=\"错误堆栈\"\n          value=\"见下\">\n          <div style=\"overflow: auto;\">\n            <pre>{{stackBeautify(props.row.err)}}</pre>\n          </div>\n        </expand-item>\n        <expand-item\n          :type=\"props.row.type\"\n          title=\"用户名\"\n          :value=\"get(props.row.user, 'name', '')\"/>\n        <expand-item\n          :type=\"props.row.type\"\n          title=\"uuid\"\n          :value=\"props.row.uuid\"/>\n        <expand-item\n          :type=\"props.row.type\"\n          title=\"token\"\n          :value=\"props.row.token\"/>\n        <expand-item\n          :type=\"props.row.type\"\n          title=\"页面地址\"\n          :value=\"props.row.url\"/>\n        <expand-item\n          :type=\"props.row.type\"\n          title=\"时间\"\n          :value=\"props.row.time\"/>\n      </div>\n    </el-table-column>\n\n    <el-table-column\n      prop=\"type\"\n      label=\"类型\"\n      width=\"80px\"\n      align=\"center\"\n      :filters=\"[\n        { text: '日志', value: 'log' },\n        { text: '异常', value: 'error' }\n      ]\"\n      :filter-multiple=\"false\"\n      :filter-method=\"filterType\"\n      filter-placement=\"bottom\">\n      <template slot-scope=\"scope\">\n        <el-tag\n          v-if=\"scope.row.type === 'error'\"\n          size=\"mini\"\n          type=\"danger\">\n          <d2-icon name=\"bug\"/> Bug\n        </el-tag>\n        <el-tag\n          v-else\n          size=\"mini\"\n          type=\"info\">\n          <d2-icon name=\"dot-circle-o\"/> Log\n        </el-tag>\n      </template>\n    </el-table-column>\n\n    <el-table-column\n      label=\"地址\"\n      prop=\"url\"\n      width=\"140px\"\n      :show-overflow-tooltip=\"true\">\n    </el-table-column>\n\n    <el-table-column\n      label=\"内容\"\n      prop=\"info\"\n      :show-overflow-tooltip=\"true\">\n    </el-table-column>\n\n    <el-table-column\n      label=\"错误类型\"\n      width=\"140px\"\n      :show-overflow-tooltip=\"true\">\n      <template\n        slot-scope=\"scope\">\n        {{get(scope.row.err, 'name', '')}}\n      </template>\n    </el-table-column>\n\n    <el-table-column\n      label=\"错误信息\"\n      width=\"300px\">\n      <template\n        slot-scope=\"scope\">\n        {{get(scope.row.err, 'message', '')}}\n      </template>\n    </el-table-column>\n\n  </el-table>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { get } from 'lodash'\nimport ExpandItem from './components/ExpandItem'\nexport default {\n  name: 'd2-error-log-list',\n  components: {\n    ExpandItem\n  },\n  computed: {\n    ...mapState('d2admin', {\n      logList: state => state.log.list\n    }),\n    logReverse () {\n      // 直接 reverse 的话有点问题\n      const res = []\n      const loglength = this.logList.length\n      this.logList.forEach((log, index) => {\n        res.push(this.logList[loglength - 1 - index])\n      })\n      return res\n    }\n  },\n  methods: {\n    get,\n    filterType (value, row) {\n      return row.type === value\n    },\n    stackBeautify (err) {\n      if (!err) {\n        return ''\n      }\n      return err.stack\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '~@/assets/style/public.scss';\n.d2-error-log-list__expand-group {\n  .d2-error-log-list__expand {\n    padding-left: 20px;\n    margin-bottom: 10px;\n    &:last-child {\n      margin-bottom: 0px;\n    }\n    .d2-error-log-list__expand-title {\n      font-size: 16px;\n      font-weight: bold;\n      margin-top: 0px;\n      margin-bottom: 10px;\n    }\n    .d2-error-log-list__expand-value {\n      font-size: 12px;\n      margin-top: 0px;\n      margin-bottom: 0px;\n    }\n  }\n  .d2-error-log-list__expand--log {\n    border-left: 4px solid $color-info;\n  }\n  .d2-error-log-list__expand--error {\n    border-left: 4px solid $color-danger;\n  }\n}\n</style>\n"]}]}