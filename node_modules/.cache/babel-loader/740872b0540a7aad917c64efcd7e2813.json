{"remainingRequest":"/Users/weizhibang/work/cloud_vue/node_modules/thread-loader/dist/cjs.js!/Users/weizhibang/work/cloud_vue/node_modules/babel-loader/lib/index.js!/Users/weizhibang/work/cloud_vue/node_modules/eslint-loader/index.js??ref--13-0!/Users/weizhibang/work/cloud_vue/src/router/index.js","dependencies":[{"path":"/Users/weizhibang/work/cloud_vue/src/router/index.js","mtime":1538206615116},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/cache-loader/dist/cjs.js","mtime":1538212059547},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport Vue from 'vue';\nimport VueRouter from 'vue-router'; // 进度条\n\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\nimport store from '@/store/index';\nimport util from '@/libs/util.js'; // 路由数据\n\nimport routes from './routes';\nVue.use(VueRouter); // 导出路由 在 main.js 里使用\n\nvar router = new VueRouter({\n  routes: routes\n});\n/**\n * 路由拦截\n * 权限验证\n */\n\nrouter.beforeEach(function (to, from, next) {\n  // 进度条\n  NProgress.start(); // 关闭搜索面板\n\n  store.commit('d2admin/search/set', false); // 验证当前路由所有的匹配中是否需要有登录验证的\n\n  if (to.matched.some(function (r) {\n    return r.meta.requiresAuth;\n  })) {\n    // 这里暂时将cookie里是否存有token作为验证是否登录的条件\n    // 请根据自身业务需要修改\n    var token = util.cookies.get('token');\n\n    if (token && token !== 'undefined') {\n      next();\n    } else {\n      // 将当前预计打开的页面完整地址临时存储 登录后继续跳转\n      // 这个 cookie(redirect) 会在登录后自动删除\n      util.cookies.set('redirect', to.fullPath); // 没有登录的时候跳转到登录界面\n\n      next({\n        name: 'login'\n      });\n    }\n  } else {\n    // 不需要身份校验 直接通过\n    next();\n  }\n});\nrouter.afterEach(function (to) {\n  // 进度条\n  NProgress.done(); // 需要的信息\n\n  var app = router.app;\n  var name = to.name,\n      params = to.params,\n      query = to.query; // 多页控制 打开新的页面\n\n  app.$store.dispatch('d2admin/page/open', {\n    name: name,\n    params: params,\n    query: query\n  }); // 更改标题\n\n  util.title(to.meta.title);\n});\nexport default router;",{"version":3,"sources":["/Users/weizhibang/work/cloud_vue/src/router/index.js"],"names":["Vue","VueRouter","NProgress","store","util","routes","use","router","beforeEach","to","from","next","start","commit","matched","some","r","meta","requiresAuth","token","cookies","get","set","fullPath","name","afterEach","done","app","params","query","$store","dispatch","title"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB,C,CAEA;;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAO,yBAAP;AAEA,OAAOC,KAAP,MAAkB,eAAlB;AAEA,OAAOC,IAAP,MAAiB,gBAAjB,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,UAAnB;AAEAL,IAAIM,GAAJ,CAAQL,SAAR,E,CAEA;;AACA,IAAMM,SAAS,IAAIN,SAAJ,CAAc;AAC3BI;AAD2B,CAAd,CAAf;AAIA;;;;;AAIAE,OAAOC,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC;AACAT,YAAUU,KAAV,GAFoC,CAGpC;;AACAT,QAAMU,MAAN,CAAa,oBAAb,EAAmC,KAAnC,EAJoC,CAKpC;;AACA,MAAIJ,GAAGK,OAAH,CAAWC,IAAX,CAAgB;AAAA,WAAKC,EAAEC,IAAF,CAAOC,YAAZ;AAAA,GAAhB,CAAJ,EAA+C;AAC7C;AACA;AACA,QAAMC,QAAQf,KAAKgB,OAAL,CAAaC,GAAb,CAAiB,OAAjB,CAAd;;AACA,QAAIF,SAASA,UAAU,WAAvB,EAAoC;AAClCR;AACD,KAFD,MAEO;AACL;AACA;AACAP,WAAKgB,OAAL,CAAaE,GAAb,CAAiB,UAAjB,EAA6Bb,GAAGc,QAAhC,EAHK,CAIL;;AACAZ,WAAK;AACHa,cAAM;AADH,OAAL;AAGD;AACF,GAfD,MAeO;AACL;AACAb;AACD;AACF,CAzBD;AA2BAJ,OAAOkB,SAAP,CAAiB,cAAM;AACrB;AACAvB,YAAUwB,IAAV,GAFqB,CAGrB;;AACA,MAAMC,MAAMpB,OAAOoB,GAAnB;AAJqB,MAKbH,IALa,GAKWf,EALX,CAKbe,IALa;AAAA,MAKPI,MALO,GAKWnB,EALX,CAKPmB,MALO;AAAA,MAKCC,KALD,GAKWpB,EALX,CAKCoB,KALD,EAMrB;;AACAF,MAAIG,MAAJ,CAAWC,QAAX,CAAoB,mBAApB,EAAyC;AAAEP,cAAF;AAAQI,kBAAR;AAAgBC;AAAhB,GAAzC,EAPqB,CAQrB;;AACAzB,OAAK4B,KAAL,CAAWvB,GAAGQ,IAAH,CAAQe,KAAnB;AACD,CAVD;AAYA,eAAezB,MAAf","sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\n// 进度条\nimport NProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\n\nimport store from '@/store/index'\n\nimport util from '@/libs/util.js'\n\n// 路由数据\nimport routes from './routes'\n\nVue.use(VueRouter)\n\n// 导出路由 在 main.js 里使用\nconst router = new VueRouter({\n  routes\n})\n\n/**\n * 路由拦截\n * 权限验证\n */\nrouter.beforeEach((to, from, next) => {\n  // 进度条\n  NProgress.start()\n  // 关闭搜索面板\n  store.commit('d2admin/search/set', false)\n  // 验证当前路由所有的匹配中是否需要有登录验证的\n  if (to.matched.some(r => r.meta.requiresAuth)) {\n    // 这里暂时将cookie里是否存有token作为验证是否登录的条件\n    // 请根据自身业务需要修改\n    const token = util.cookies.get('token')\n    if (token && token !== 'undefined') {\n      next()\n    } else {\n      // 将当前预计打开的页面完整地址临时存储 登录后继续跳转\n      // 这个 cookie(redirect) 会在登录后自动删除\n      util.cookies.set('redirect', to.fullPath)\n      // 没有登录的时候跳转到登录界面\n      next({\n        name: 'login'\n      })\n    }\n  } else {\n    // 不需要身份校验 直接通过\n    next()\n  }\n})\n\nrouter.afterEach(to => {\n  // 进度条\n  NProgress.done()\n  // 需要的信息\n  const app = router.app\n  const { name, params, query } = to\n  // 多页控制 打开新的页面\n  app.$store.dispatch('d2admin/page/open', { name, params, query })\n  // 更改标题\n  util.title(to.meta.title)\n})\n\nexport default router\n"]}]}