{"remainingRequest":"/Users/weizhibang/work/cloud_vue/node_modules/babel-loader/lib/index.js!/Users/weizhibang/work/cloud_vue/node_modules/eslint-loader/index.js??ref--13-0!/Users/weizhibang/work/cloud_vue/src/store/modules/d2admin/modules/releases.js","dependencies":[{"path":"/Users/weizhibang/work/cloud_vue/src/store/modules/d2admin/modules/releases.js","mtime":1538206615119},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/cache-loader/dist/cjs.js","mtime":1538212059547},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/weizhibang/work/cloud_vue/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport { httpGet } from '@/api/sys/http';\nimport semver from 'semver';\nimport util from '@/libs/util.js';\nimport setting from '@/setting.js';\nexport default {\n  namespaced: true,\n  state: {\n    // D2Admin 版本\n    version: setting.releases.version,\n    // 最新版本的信息\n    latest: {},\n    // 有新版本\n    update: false\n  },\n  actions: {\n    /**\n     * @description 检查版本更新\n     * @param {Object} param context\n     */\n    checkUpdate: function checkUpdate(_ref) {\n      var state = _ref.state,\n          commit = _ref.commit;\n      httpGet(setting.releases.api).then(function (res) {\n        var versionGet = res.tag_name;\n        var update = semver.lt(state.version, versionGet);\n\n        if (update) {\n          util.log.capsule('D2Admin', \"New version \".concat(res.name));\n          console.log(\"\\u7248\\u672C\\u53F7: \".concat(res.tag_name, \" | \\u8BE6\\u60C5 \").concat(res.html_url));\n          commit('updateSet', true);\n        }\n\n        commit('latestSet', res);\n      }).catch(function (err) {\n        console.log('checkUpdate error', err);\n      });\n    }\n  },\n  mutations: {\n    /**\n     * @description 显示版本信息\n     * @param {Object} state vuex state\n     */\n    versionShow: function versionShow(state) {\n      util.log.capsule('D2Admin', \"v\".concat(state.version));\n      console.log('Github https://github.com/d2-projects/d2-admin');\n      console.log('Doc    https://d2-projects.github.io/d2-admin-doc/zh/');\n    },\n\n    /**\n     * @description 设置是否有新的 D2Admin 版本\n     * @param {Object} state vuex state\n     * @param {Boolean} update can update\n     */\n    updateSet: function updateSet(state, update) {\n      // store 赋值\n      state.update = update;\n    },\n\n    /**\n     * @description 设置最新版本的信息\n     * @param {Object} state vuex state\n     * @param {Object}} latest releases value\n     */\n    latestSet: function latestSet(state, latest) {\n      // store 赋值\n      state.latest = latest;\n    }\n  }\n};",{"version":3,"sources":["/Users/weizhibang/work/cloud_vue/src/store/modules/d2admin/modules/releases.js"],"names":["httpGet","semver","util","setting","namespaced","state","version","releases","latest","update","actions","checkUpdate","commit","api","then","versionGet","res","tag_name","lt","log","capsule","name","console","html_url","catch","err","mutations","versionShow","updateSet","latestSet"],"mappings":";AAAA,SAASA,OAAT,QAAwB,gBAAxB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,OAAOC,OAAP,MAAoB,cAApB;AAEA,eAAe;AACbC,cAAY,IADC;AAEbC,SAAO;AACL;AACAC,aAASH,QAAQI,QAAR,CAAiBD,OAFrB;AAGL;AACAE,YAAQ,EAJH;AAKL;AACAC,YAAQ;AANH,GAFM;AAUbC,WAAS;AACP;;;;AAIAC,eALO,6BAKyB;AAAA,UAAjBN,KAAiB,QAAjBA,KAAiB;AAAA,UAAVO,MAAU,QAAVA,MAAU;AAC9BZ,cAAQG,QAAQI,QAAR,CAAiBM,GAAzB,EACGC,IADH,CACQ,eAAO;AACX,YAAIC,aAAaC,IAAIC,QAArB;AACA,YAAMR,SAASR,OAAOiB,EAAP,CAAUb,MAAMC,OAAhB,EAAyBS,UAAzB,CAAf;;AACA,YAAIN,MAAJ,EAAY;AACVP,eAAKiB,GAAL,CAASC,OAAT,CAAiB,SAAjB,wBAA2CJ,IAAIK,IAA/C;AACAC,kBAAQH,GAAR,+BAAoBH,IAAIC,QAAxB,6BAAyCD,IAAIO,QAA7C;AACAX,iBAAO,WAAP,EAAoB,IAApB;AACD;;AACDA,eAAO,WAAP,EAAoBI,GAApB;AACD,OAVH,EAWGQ,KAXH,CAWS,eAAO;AACZF,gBAAQH,GAAR,CAAY,mBAAZ,EAAiCM,GAAjC;AACD,OAbH;AAcD;AApBM,GAVI;AAgCbC,aAAW;AACT;;;;AAIAC,eALS,uBAKItB,KALJ,EAKW;AAClBH,WAAKiB,GAAL,CAASC,OAAT,CAAiB,SAAjB,aAAgCf,MAAMC,OAAtC;AACAgB,cAAQH,GAAR,CAAY,gDAAZ;AACAG,cAAQH,GAAR,CAAY,uDAAZ;AACD,KATQ;;AAUT;;;;;AAKAS,aAfS,qBAeEvB,KAfF,EAeSI,MAfT,EAeiB;AACxB;AACAJ,YAAMI,MAAN,GAAeA,MAAf;AACD,KAlBQ;;AAmBT;;;;;AAKAoB,aAxBS,qBAwBExB,KAxBF,EAwBSG,MAxBT,EAwBiB;AACxB;AACAH,YAAMG,MAAN,GAAeA,MAAf;AACD;AA3BQ;AAhCE,CAAf","sourcesContent":["import { httpGet } from '@/api/sys/http'\nimport semver from 'semver'\nimport util from '@/libs/util.js'\nimport setting from '@/setting.js'\n\nexport default {\n  namespaced: true,\n  state: {\n    // D2Admin 版本\n    version: setting.releases.version,\n    // 最新版本的信息\n    latest: {},\n    // 有新版本\n    update: false\n  },\n  actions: {\n    /**\n     * @description 检查版本更新\n     * @param {Object} param context\n     */\n    checkUpdate ({ state, commit }) {\n      httpGet(setting.releases.api)\n        .then(res => {\n          let versionGet = res.tag_name\n          const update = semver.lt(state.version, versionGet)\n          if (update) {\n            util.log.capsule('D2Admin', `New version ${res.name}`)\n            console.log(`版本号: ${res.tag_name} | 详情 ${res.html_url}`)\n            commit('updateSet', true)\n          }\n          commit('latestSet', res)\n        })\n        .catch(err => {\n          console.log('checkUpdate error', err)\n        })\n    }\n  },\n  mutations: {\n    /**\n     * @description 显示版本信息\n     * @param {Object} state vuex state\n     */\n    versionShow (state) {\n      util.log.capsule('D2Admin', `v${state.version}`)\n      console.log('Github https://github.com/d2-projects/d2-admin')\n      console.log('Doc    https://d2-projects.github.io/d2-admin-doc/zh/')\n    },\n    /**\n     * @description 设置是否有新的 D2Admin 版本\n     * @param {Object} state vuex state\n     * @param {Boolean} update can update\n     */\n    updateSet (state, update) {\n      // store 赋值\n      state.update = update\n    },\n    /**\n     * @description 设置最新版本的信息\n     * @param {Object} state vuex state\n     * @param {Object}} latest releases value\n     */\n    latestSet (state, latest) {\n      // store 赋值\n      state.latest = latest\n    }\n  }\n}\n"]}]}